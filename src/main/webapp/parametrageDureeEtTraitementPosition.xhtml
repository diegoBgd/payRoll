<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/masterPage.xhtml">

	<ui:define name="content">
		<h:form id="frm" onkeypress="if (event.keyCode == 13) { return false; }">
			<p:growl showDetail="true" sticky="false" />
			<f:metadata>
				<f:event listener="#{authenticite.gestionPosition()}"
					type="preRenderView" />
			</f:metadata>
			<div class="ui-g">
				<div class="ui-g-12  ui-lg-12 ui-fluid contact-form">
					<div class="ui-g-12 ">
						<div class="card">
							<div class="ui-g">

								<div class="ui-g-12 ui-md-6">
									<p:commandButton value="Recherche" icon="fa fa-search"
										onclick="PF('dlgParm').show();" />
								</div>
							</div>
						</div>
						<div class="card">
							<p:tabView id="gen">
								<p:tab id="tab1" title="Traitement des positions">
									<div class="ui-g card">
										<div class="ui-g-12 ui-md-6 ui-lg-6">
											<h:outputLabel value="Position" />
											<p:selectOneMenu id="txtPosi"
												value="#{parametrageDureeEtTraitementPositionB.idposition}"
												valueChangeListener="#{parametrageDureeEtTraitementPositionB.changePosition}">
												<f:selectItem itemLabel="" itemValue="0" />
												<f:selectItem itemLabel="L'activité de service"
													itemValue="1" />
												<f:selectItem itemLabel="Le détachement" itemValue="2" />
												<f:selectItem
													itemLabel="La suspension d'activités de service"
													itemValue="3" />
												<f:selectItem itemLabel="La disponibilité" itemValue="4" />
												<f:selectItem
													itemLabel="La suspension de fonction par mesure d'ordre"
													itemValue="5" />
												<p:ajax event="change"
													update=":frm:gen:txtPosi,:frm:gen:txtCondi" />
											</p:selectOneMenu>
										</div>
										<div class="ui-g-12 ui-md-6 ui-lg-6">
											<h:outputText value="Condition Position" />
											<p:selectOneMenu id="txtCondi"
												value="#{parametrageDureeEtTraitementPositionB.idCondition}"
												valueChangeListener="#{parametrageDureeEtTraitementPositionB.changeCondition}">
												<f:selectItems
													value="#{parametrageDureeEtTraitementPositionB.listCondition}" />
												<p:ajax event="itemSelect" update=":frm:gen:txtCondi" />
											</p:selectOneMenu>
										</div>
										<div class="ui-g-12 ui-md-6">
											<h:outputLabel value="Durée Demande (mois)" />
											<p:inputText id="txtDureeDem"
												value="#{parametrageDureeEtTraitementPositionB.dureeDemande}" />
										</div>
										<div class="ui-g-12 ui-md-6">
											<h:outputLabel value="Durée Position (mois)" />
											<p:inputText id="txtDureePos"
												value="#{parametrageDureeEtTraitementPositionB.dureePosition}" />
										</div>
										<div class="ui-g-12 ui-md-6 ui-lg-6">
											<h:outputLabel value="Position Dépassement" />
											<p:selectOneMenu id="txtPosition"
												value="#{parametrageDureeEtTraitementPositionB.idPositionDepassement}"
												valueChangeListener="#{parametrageDureeEtTraitementPositionB.changePositionDepassement}">
												<f:selectItem itemLabel="" itemValue="0" />
												<f:selectItem itemLabel="L'activité de service"
													itemValue="1" />
												<f:selectItem itemLabel="Le détachement" itemValue="2" />
												<f:selectItem
													itemLabel="La suspension d'activités de service"
													itemValue="3" />
												<f:selectItem itemLabel="La disponibilité" itemValue="4" />
												<f:selectItem
													itemLabel="La suspension de fonction par mesure d'ordre"
													itemValue="5" />
												<p:ajax event="change" update=":frm:gen:txtPosition" />
											</p:selectOneMenu>
										</div>
										<div class="ui-g-12 ui-md-6">
											<h:outputText
												value="Taux traitement pendant la période de position" />
											<p:inputText id="txtTauxav"
												value="#{parametrageDureeEtTraitementPositionB.tauxTraitementAvantFinS}%">
												<p:ajax event="change"
													listener="#{parametrageDureeEtTraitementPositionB.changeTauxTraitementAvantFin()}"
													update="txtTauxav" />
											</p:inputText>
										</div>
										<div class="ui-g-12 ui-md-6">
											<h:outputText
												value="Taux traitement après la période de position" />
											<p:inputText id="txtTauxap"
												value="#{parametrageDureeEtTraitementPositionB.tauxTraitementApresFinS}%">
												<p:ajax event="change"
													listener="#{parametrageDureeEtTraitementPositionB.changeTauxTraitementApresFin()}"
													update="txtTauxap" />
											</p:inputText>
										</div>
										<div class="ui-g-12 ui-md-6">
											<h:outputText value="Cause" />
											<p:selectOneMenu id="txtCause"
												value="#{parametrageDureeEtTraitementPositionB.cause}"
												valueChangeListener="#{parametrageDureeEtTraitementPositionB.changePositionDepassement}">
												<f:selectItem itemLabel="" itemValue="0" />
												<f:selectItem itemLabel="Maladie professionnelle"
													itemValue="1" />
												<f:selectItem itemLabel="Accident de travail" itemValue="2" />
												<p:ajax event="change" update=":frm:gen:txtCause" />
											</p:selectOneMenu>
										</div>

										<div class="ui-g-12 ui-md-6">
											<h:outputText value="Ajout Allocation familiale" />
											<p:selectBooleanCheckbox
												value="#{parametrageDureeEtTraitementPositionB.ajoutAllocationFamiliale}"
												style="float:right" />
										</div>
										<div class="ui-g-12 ui-md-6">
											<h:outputText value="Ajout indemnité logement" />
											<p:selectBooleanCheckbox
												value="#{parametrageDureeEtTraitementPositionB.ajoutIndemniteLogement}"
												style="float:right" />
										</div>
										<div class="ui-g-12 ui-md-6">
											<h:outputText value="Ajout soin de santé" />
											<p:selectBooleanCheckbox
												value="#{parametrageDureeEtTraitementPositionB.ajoutSoinsSante}"
												style="float:right" />
										</div>
										<div class="ui-g-12 ui-md-6">
											<h:outputText value="Avancement traitement" />
											<p:selectBooleanCheckbox
												value="#{parametrageDureeEtTraitementPositionB.avancementTraitement}"
												style="float:right" />
										</div>
									</div>

								</p:tab>
								<p:tab id="tab2" title="Ancienneté et durée">
									<div class="ui-g card">
										<p:dataTable id="tbDet" var="detai"
											value="#{parametrageDureeEtTraitementPositionB.listDuree}"
											rowKey="#{detai.duree}" selectionMode="single"
											selection="#{parametrageDureeEtTraitementPositionB.selectedDetail}"
											paginator="true" paginatorAlwaysVisible="false"
											paginatorPosition="bottom" rows="10">

											<p:ajax event="rowSelect"
												listener="#{parametrageDureeEtTraitementPositionB.onRowSelectedDetail}"
												update=":frm:gen:txtAncMin,:frm:gen:txtAncMax,:frm:gen:txtDuree" />
											<p:column headerText="Ancienneté min">
												<h:outputText value="#{detai.ancienneteMin}" />
											</p:column>
											<p:column headerText="Ancienneté max">
												<h:outputText value="#{detai.ancienneteMax}" />
											</p:column>
											<p:column headerText="Durée">
												<h:outputText value="#{detai.duree}" />
											</p:column>
										</p:dataTable>
									</div>
									<div class="ui-g card">
										<div class="ui-g-12 ui-md-6 ui-lg-4">
											<h:outputLabel value="Ancienneté min" />
											<p:inputText id="txtAncMin"
												value="#{parametrageDureeEtTraitementPositionB.anciennetteMin}" />
										</div>
										<div class="ui-g-12 ui-md-6 ui-lg-4">
											<h:outputLabel value="Ancienneté max" />
											<p:inputText id="txtAncMax"
												value="#{parametrageDureeEtTraitementPositionB.anciennetteMax}" />
										</div>
										<div class="ui-g-12 ui-md-6 ui-lg-4">
											<h:outputLabel value="Durée" />
											<p:inputText id="txtDuree"
												value="#{parametrageDureeEtTraitementPositionB.dureeDetail}" />
										</div>
									</div>	
		`						<div class="ui-g card">
										<div class="ui-g-12 ui-md-3">
											<p:commandButton id="btnAjouter" icon="fa fa-plus"
												value=" Ajouter"
												action="#{parametrageDureeEtTraitementPositionB.chargerDetail()}"
												update=":frm:gen:tbDet,:frm:gen:txtAncMin,:frm:gen:txtAncMax,:frm:gen:txtDuree" />
										</div>
										<div class="ui-g-12 ui-md-3">
											<p:commandButton id="btnEnlever" icon="fa fa-remove"
												value="Enlever"
												action="#{parametrageDureeEtTraitementPositionB.enleverDetail()}"
												update=":frm:gen:tbDet,:frm:gen:txtAncMin,:frm:gen:txtAncMax,:frm:gen:txtDuree" />
										</div>

									</div>
								</p:tab>
							</p:tabView>
						</div>
					</div>
					<div class="ui-g card">
						<div class="ui-g-12 ui-md-4">
							<p:commandButton id="btnSave" icon="ui-icon ui-icon-disk"
								value="Enregistrer"
								action="#{parametrageDureeEtTraitementPositionB.save()}"
								update=":frm" immediate="true" />
						</div>
						<div class="ui-g-12 ui-md-4">
							<p:commandButton id="btnDelete" icon="ui-icon ui-icon-trash"
								value="Supprimer"
								onclick="if (!confirm('Voullez-vous vraiment Supprimer?')) return false"
								action="#{parametrageDureeEtTraitementPositionB.supprimer()}"
								update=":frm" styleClass="orange-btn" immediate="true" />
						</div>
						<div class="ui-g-12 ui-md-4">
							<p:commandButton id="btnAnnuler" icon="ui-icon ui-icon-refresh"
								value="Initialiser"
								action="#{parametrageDureeEtTraitementPositionB.initialiser()}"
								update=":frm" immediate="true" />
						</div>

					</div>

				</div>


			</div>

		</h:form>
		<p:dialog widgetVar="dlgParm" header="Rechercher Employé" height="40%"
			width="80%" responsive="true" position="center">
			<h:form id="frmRech">
				<div class="ui-g">
					<div class="ui-g-12 ui-md-6 ui-lg-12 ui-fluid contact-form">
						<div class="card">


							<div class="ui-g">
								<div class="ui-g-12 ui-md-12">

									<p:dataTable id="tbl" var="parame"
										value="#{parametrageDureeEtTraitementPositionB.listParametrage}"
										rowKey="#{parame.id}" selectionMode="single"
										selection="#{parametrageDureeEtTraitementPositionB.selected}"
										paginator="true" paginatorAlwaysVisible="false"
										paginatorPosition="bottom" rows="10" emptyMessage="">
										<p:ajax event="rowSelect"
											listener="#{parametrageDureeEtTraitementPositionB.onRowSelect}"
											update=":frm" />

										<p:column headerText="Positoin" width="30%">
											<h:outputText value="#{parame.conditionPosition.position}" />
										</p:column>
										<p:column headerText="Condition Position" width="30%">
											<h:outputText value="#{parame.conditionPosition.condition}" />
										</p:column>
										<p:column headerText="Durée Demande ">
											<h:outputText value="#{parame.dureeDemande}" />
										</p:column>
										<p:column headerText="Durée Position">
											<h:outputText value="#{parame.dureePosition}" />
										</p:column>
										<p:column headerText="Position Dépassement">
											<h:outputText value="#{parame.positionDepassementDuree}" />
										</p:column>
										<p:column headerText="Taux traitement avant fin">
											<h:outputText value="#{parame.tauxTraitementAvantFin}" />
										</p:column>
										<p:column headerText="Taux traitement après fin">
											<h:outputText value="#{parame.tauxTraitementApresFin}" />
										</p:column>
									</p:dataTable>

								</div>
							</div>
						</div>
					</div>
				</div>

			</h:form>
		</p:dialog>

	</ui:define>

</ui:composition>




